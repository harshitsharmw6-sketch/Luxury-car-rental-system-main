// scripts.js - small booking logic and UI helpers document.addEventListener('DOMContentLoaded', function () { // Fill copyright year const yr = document.getElementById('yr'); if (yr) yr.textContent = new Date().getFullYear(); // Modal and form elements const bookingModalEl = document.getElementById('bookingModal'); const bookingModal = new bootstrap.Modal(bookingModalEl); const carNameInput = document.getElementById('carName'); const priceNote = document.getElementById('priceNote'); const totalPriceEl = document.getElementById('totalPrice'); const startDate = document.getElementById('startDate'); const endDate = document.getElementById('endDate'); const bookingForm = document.getElementById('bookingForm'); let selectedPrice = 0; // Attach click handlers to Book buttons document.querySelectorAll('.btn-book').forEach(btn => { btn.addEventListener('click', () => { const name = btn.dataset.name || 'Selected car'; selectedPrice = parseFloat(btn.dataset.price || '0'); carNameInput.value = name; priceNote.textContent = `Price per day: $${selectedPrice}`; totalPriceEl.textContent = `$${selectedPrice}`; // Reset dates and inputs startDate.value = ''; endDate.value = ''; bookingForm.classList.remove('was-validated'); bookingModal.show(); }); }); // Compute total whenever dates change function computeTotal() { if (!startDate.value || !endDate.value) { totalPriceEl.textContent = `$${selectedPrice || 0}`; return; } const s = new Date(startDate.value); const e = new Date(endDate.value); if (isNaN(s) || isNaN(e) || e < s) { totalPriceEl.textContent = '—'; return; } // Inclusive days count: at least 1 day const msPerDay = 24 * 60 * 60 * 1000; const days = Math.max(1, Math.round((e - s) / msPerDay) + 1); const total = (selectedPrice * days).toFixed(2); totalPriceEl.textContent = `$${total}`; } startDate.addEventListener('change', computeTotal); endDate.addEventListener('change', computeTotal); // Simple form submit handling (replace with API integration later) bookingForm.addEventListener('submit', (ev) => { ev.preventDefault(); bookingForm.classList.add('was-validated'); if (!bookingForm.checkValidity()) { return; } // Gather data const payload = { car: carNameInput.value, start: startDate.value, end: endDate.value, name: document.getElementById('fullName').value, email: document.getElementById('email').value, total: totalPriceEl.textContent }; // For now, just show success toast / alert bookingModal.hide(); // You can replace this with fetch(...) to your backend API alert(`Thanks ${payload.name}! Your booking for ${payload.car} (${payload.start} → ${payload.end}) has been received.\nTotal: ${payload.total}`); }); // Optional: simple client-side sorting (by price) const sortSelect = document.getElementById('sortSelect'); if (sortSelect) { sortSelect.addEventListener('change', () => { const grid = document.getElementById('carsGrid'); const items = Array.from(grid.children); const val = sortSelect.value; if (val === 'price-low' || val === 'price-high') { items.sort((a,b) => { const pa = parseFloat(a.querySelector('.btn-book').dataset.price); const pb = parseFloat(b.querySelector('.btn-book').dataset.price); return val === 'price-low' ? pa - pb : pb - pa; }); items.forEach(i => grid.appendChild(i)); } else { // default: no-op or restore original order (not implemented) } }); } });
